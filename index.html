<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Pago - Informaci√≥n de Transferencia</title>
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      padding: 20px;
      background: #f7f7f8;
      color: #111;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.06);
      max-width: 520px;
      margin: 24px auto;
    }
    h1 { font-size: 20px; margin: 0 0 8px; }
    p.lead { margin: 0 0 14px; color: #444; }
    .field { margin-bottom:12px; }
    .label { font-size:12px; color:#666; margin-bottom:6px; display:block; }
    .value {
      font-size:16px;
      padding:10px;
      background:#f3f4f6;
      border-radius:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    button {
      margin-left:8px;
      padding:8px 10px;
      border-radius:8px;
      border:0;
      background:#0b5fff;
      color:white;
      cursor:pointer;
    }
    .whatsapp {
      display: inline-block;
      width: 220px;
      text-align: center;
      margin-top: 12px;
      text-decoration: none;
      padding: 10px 14px;
      border-radius: 10px;
      background: #25D366;
      color: white;
      font-weight: 600;
      box-sizing: border-box;
    }
    .a { text-align: center; }
    #contador {
      position: fixed;
      bottom: 8px;
      right: 10px;
      background: rgba(0,0,0,0.7);
      color: #fff;
      font-size: 13px;
      padding: 6px 10px;
      border-radius: 8px;
      font-family: monospace;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Informaci√≥n para Transferencia</h1>
    <p class="lead">Copia los datos para hacer la transferencia en tu banco o app.</p>

    <div class="field">
      <span class="label">N√∫mero de cuenta</span>
      <div class="value">
        <span id="cuenta">4152314371749121</span>
        <div><button onclick="copyText('cuenta')">Copiar</button></div>
      </div>
    </div>

    <div class="field">
      <span class="label">Nombre del beneficiario</span>
      <div class="value">
        <span id="beneficiario">JOSE ALFREDO RAMIREZ ACOSTA</span>
        <div><button onclick="copyText('beneficiario')">Copiar</button></div>
      </div>
    </div>

    <div class="field">
      <span class="label">Concepto sugerido</span>
      <div class="value">
        <span id="concepto">SIX SAN PEDRO</span>
        <div><button onclick="copyText('concepto')">Copiar</button></div>
      </div>
    </div>
    
    <div class="a">
      <a class="whatsapp" href="https://wa.me/5216624446775?text=Hola%20quiero%20hacer%20una%20compra%20en%20Six%20San%20Pedro" target="_blank">WhatsApp Manuel</a><br>
      <a class="whatsapp" href="https://wa.me/5216621559978?text=Hola%20quiero%20hacer%20una%20compra%20en%20Six%20San%20Pedro" target="_blank">WhatsApp Joel</a>
    </div>
  </div>

  <!-- Contador global -->
  <div id="contador">Cargando visitas...</div>

<script>
function copyText(id){
  const el = document.getElementById(id);
  if(!el) return;
  const text = el.innerText;
  navigator.clipboard.writeText(text).then(function(){
    const old = event.target.innerText;
    event.target.innerText = 'Copiado';
    setTimeout(()=> event.target.innerText = old,1200);
  }, function(){
    alert('No se pudo copiar. Selecciona y copia manualmente: ' + text);
  });
}

// üîÅ Redirigir despu√©s de 10 segundos
setTimeout(() => {
  window.location.href = "https://google.com";
}, 10000);

// üßÆ Contador con l√≠mite por IP (1 visita cada 12 horas)
async function contarVisita() {
  const contadorID = "six_san_pedro_pagos";
  const ultimaVisita = localStorage.getItem("ultimaVisita");
  const ahora = Date.now();
  const limite = 12 * 60 * 60 * 1000; // 12 horas

  try {
    // Obtiene IP p√∫blica del visitante
    const ipData = await fetch("https://api.ipify.org?format=json").then(r => r.json());
    const ip = ipData.ip;
    const clave = `visita_${ip}`;

    const ultimaIP = localStorage.getItem(clave);

    if (!ultimaIP || (ultimaVisita && ahora - ultimaVisita > limite)) {
      // Incrementa contador global
      const data = await fetch(`https://api.countapi.xyz/hit/${contadorID}/visitas`).then(r => r.json());
      document.getElementById("contador").innerText = `üëÅÔ∏è Visitas totales: ${data.value}`;
      localStorage.setItem("ultimaVisita", ahora);
      localStorage.setItem(clave, ip);
    } else {
      // Solo obtiene sin incrementar
      const data = await fetch(`https://api.countapi.xyz/get/${contadorID}/visitas`).then(r => r.json());
      document.getElementById("contador").innerText = `üëÅÔ∏è Visitas totales: ${data.value}`;
    }
  } catch (e) {
    document.getElementById("contador").innerText = "Error al contar visitas";
  }
}

contarVisita();
</script>
</body>
</html>
